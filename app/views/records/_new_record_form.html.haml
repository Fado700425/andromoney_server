.recordForm.clearfix
  = form_for @record, url: records_path(@record, month_from_now: params[:month_from_now]) do |f|
    -# the 1st line
    .form-group
      .container-fluid.record
        .row.row-full-width
          .col-md-3
            .input-group
              %span.input-group-addon
                = image_tag("currency_sign_dollar.png", width: "15px")
                #{t('amount')}
              = f.number_field(:mount, class: "form-control", :step => 'any')
          .col-md-4
            .input-group
              %span.input-group-addon
                %span.glyphicon.glyphicon-calendar
                #{t('report.date')}
              = f.text_field(:date, {id: "datetimepicker_report", class: "form-control", value: Time.now.strftime("%Y/%m/%d/T%H%M")})

    -# the 2nd line
    .form-group
      .container-fluid.record
        .row.row-full-width
          .col-md-3
            %span.label.label-primary.select-label
              %span.glyphicon.glyphicon-th-large
              #{t('category.main_category')}
            = f.select(:category, @expense_category.collect {|p| [ p.category , p.hash_key, :"data-image" => asset_path(p.photo_path) ]}, {selected: @expense_category.first.hash_key}, { class: "select-with-icon", size: 5 })

          .col-md-2
            %span.label.label-primary.select-label
              %span.glyphicon.glyphicon-list-alt
              #{t('subcategory.subcategory')}
            = f.grouped_collection_select(:sub_category, @expense_category, :subcategories, :category, :hash_key, :subcategory, {selected: @subcategories.first.hash_key}, {class: 'select-subcategory', size: 5 })

          .col-md-3
            %span.label.label-primary.select-label
              %span.glyphicon.glyphicon-share
              #{t('payment.payment')}
            = f.select(:out_payment, @payments.collect {|p| [ p.payment_name + " (" + p.currency_code + ")", p.payment_name, :"data-image" => asset_path(payment_icon(p.kind)) ]}, {selected: @payments.first.payment_name}, {class: 'select-with-icon', size: 5 })

          .col-md-2
            %span.label.label-primary.select-label
              %span.glyphicon.glyphicon-check
              #{t('payee.payee')}
            = f.select(:payee, @payees.collect {|p| [ p.payee_name, p.payee_name ]}, {}, {class: 'select-with-icon', size: 5 })

          .col-md-2
            %span.label.label-primary.select-label
              %span.glyphicon.glyphicon-book
              #{t('project.project')}
            = f.select(:project, @projects.collect {|p| [ p.project_name, p.project_name]}, {}, {class: 'select-with-icon', size: 5 })

    -# the 3rd line: remark
    .form-group
      .input-group
        %span.input-group-addon
          %span.glyphicon.glyphicon-align-left
          #{t('note')}
        = f.text_area :remark, class: 'form-control'

    -# submit button
    .pull-right
      %br
      -#= f.submit t('confirm_add'), class: "btn btn-primary btn-lg"
      = f.submit "儲存並新增下一筆", class: "btn btn-success btn-lg"
      = f.submit "儲存並回到列表", class: "btn btn-info btn-lg"

:javascript
  $(document).ready(function(e) {
    try {
      $(".select-with-icon").msDropDown();
    } catch(e) {
      alert(e.message);
    }
  });

  $('.select-subcategory').find('option').css({
    "font-size":"16px",
    "padding":"5px 5px 5px 5px",
    "border-bottom":"1px solid #c3c3c3",
    "autocomplete":"off"
  });